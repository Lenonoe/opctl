name: test
description: Runs all tests
inputs:
  appDir:
    dir:
      default: .
      description: directory containing the app
  npmRegistryUrl:
    string:
      constraints: { format: uri }
      default: https://registry.npmjs.org/
run:
  serial:
    - op:
        pkg: { ref: install-deps }
        inputs: { npmRegistryUrl }
        outputs: { appDir }
    - parallel:
      - op:
          pkg: { ref: test-unit }
          inputs: { appDir }
      - op:
          pkg: { ref: test-style }
          inputs: { appDir }
