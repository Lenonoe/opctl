name: test-acceptance
description: Runs acceptance tests
inputs:
  app_dir: { dir:, description: directory containing a nodejs app }
  api_socket: { socket:, description: socket for the system under test }
run:
  container:
    cmd: [ node_modules/.bin/mocha, --recursive, --reporter=spec, tests/unit ]
    dirs:
      /opt/app: { bind: app_dir }
    image: node:7.4
    sockets:
      api:80: { bind: api_socket }
    workDir: /opt/app
