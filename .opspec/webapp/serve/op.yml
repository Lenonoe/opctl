description: serves the webapp locally on port 80
name: webapp/serve
inputs:
  src:
    dir:
      default: webapp
run:
  serial:
    - container:
        cmd:
          - sh
          - -ce
          - |
            echo "installing deps"
            npm install -q
        image: { ref: 'node:7.10.1-alpine' }
        dirs:
          /src: src
        workDir: /src
    - container:
        cmd: [ npm, start ]
        image: { ref: 'node:7.10.1-alpine' }
        dirs:
          /src: src
        ports:
          '80': '80'
        workDir: /src
