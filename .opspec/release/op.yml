name: release
description: runs all ops necessary to perform a release
inputs:
- name: CODECOV_TOKEN
  description: A https://codecov.io/ auth token
  isSecret: true
- name: DOCKER_PASSWORD
  description: Password for docker registry
  isSecret: true
- name: DOCKER_USERNAME
  description: Username for docker registry
  isSecret: true
- name: GIT_BRANCH
  description: The git branch the coverage should be associated with
- name: IMAGE_TAG
  description: The tag of the image to use
run:
  serial:
  - op: build
  - op: test
  - op: publish-coverage
  - op: push-docker-image
